<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4: –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ LSB –º–µ—Ç–æ–¥–∏</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        nav {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        nav a {
            color: #667eea;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        nav a:hover {
            background: #f0f0f0;
        }

        .section {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h2 {
            color: #667eea;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f0f0;
        }

        h3 {
            color: #764ba2;
            margin: 1.5rem 0 1rem 0;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            margin: 1rem 0;
            position: relative;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }

        .copy-btn:hover {
            background: #764ba2;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        ul, ol {
            margin: 1rem 0 1rem 2rem;
        }

        li {
            margin: 0.5rem 0;
        }

        .output-block {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>üî¨ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4</h1>
        <p class="subtitle">–ê–¥–∞–ø—Ç–∏–≤–Ω—ñ LSB –º–µ—Ç–æ–¥–∏: Edge-based embedding, PVD –º–µ—Ç–æ–¥</p>
    </header>

    <nav>
        <ul>
            <li><a href="#theory">üìö –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –æ—Å–Ω–æ–≤–∏</a></li>
            <li><a href="#setup">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a></li>
            <li><a href="#edge-detection">üîç Edge Detection</a></li>
            <li><a href="#edge-lsb">üéØ Edge-based LSB</a></li>
            <li><a href="#pvd">üìä PVD –º–µ—Ç–æ–¥</a></li>
            <li><a href="#comparison">‚öñÔ∏è –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</a></li>
            <li><a href="#tasks">üìù –ó–∞–≤–¥–∞–Ω–Ω—è</a></li>
        </ul>
    </nav>

    <section id="theory" class="section">
        <h2>üìö –¢–µ–æ—Ä–µ—Ç–∏—á–Ω—ñ –æ—Å–Ω–æ–≤–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤</h2>

        <h3>–ü—Ä–æ–±–ª–µ–º–∏ –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ LSB</h3>
        <p>–ö–ª–∞—Å–∏—á–Ω–∏–π LSB –º–µ—Ç–æ–¥ –º–æ–¥–∏—Ñ—ñ–∫—É—î –≤—Å—ñ –ø—ñ–∫—Å–µ–ª—ñ –æ–¥–Ω–∞–∫–æ–≤–æ, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ:</p>
        <ul>
            <li>–õ–µ–≥–∫–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏</li>
            <li>–í–∏–¥–∏–º–∏—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ñ–≤ —É –≥–ª–∞–¥–∫–∏—Ö –æ–±–ª–∞—Å—Ç—è—Ö</li>
            <li>–ù–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —î–º–Ω–æ—Å—Ç—ñ</li>
        </ul>

        <div class="info-box">
            <strong>üí° –ö–ª—é—á–æ–≤–∞ —ñ–¥–µ—è:</strong> –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ –≤–±—É–¥–æ–≤—É—é—Ç—å –±—ñ–ª—å—à–µ –¥–∞–Ω–∏—Ö —É —Ç–µ–∫—Å—Ç—É—Ä–Ω—ñ –æ–±–ª–∞—Å—Ç—ñ, –¥–µ –∑–º—ñ–Ω–∏ –º–µ–Ω—à –ø–æ–º—ñ—Ç–Ω—ñ, —ñ –º–µ–Ω—à–µ –∞–±–æ –∑–æ–≤—Å—ñ–º –Ω–µ –≤–±—É–¥–æ–≤—É—é—Ç—å —É –≥–ª–∞–¥–∫—ñ –æ–±–ª–∞—Å—Ç—ñ.
        </div>

        <h3>Edge-based Embedding</h3>
        <p>–ú–µ—Ç–æ–¥ –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –¥–µ—Ç–µ–∫—Ü—ñ—ó –∫—Ä–∞—ó–≤. –û–±–ª–∞—Å—Ç—ñ –∑ –≤–µ–ª–∏–∫–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∫—Ä–∞—ó–≤ –º–æ–∂—É—Ç—å –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –±–µ–∑ –ø–æ–º—ñ—Ç–Ω–æ–≥–æ –ø–æ–≥—ñ—Ä—à–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ.</p>

        <h3>PVD (Pixel Value Differencing)</h3>
        <p>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ —Å—É—Å—ñ–¥–Ω—ñ–º–∏ –ø—ñ–∫—Å–µ–ª—è–º–∏. –ë—ñ–ª—å—à–∞ —Ä—ñ–∑–Ω–∏—Ü—è –¥–æ–∑–≤–æ–ª—è—î –≤–±—É–¥—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ –±—ñ—Ç.</p>

        <table>
            <thead>
            <tr>
                <th>–ú–µ—Ç–æ–¥</th>
                <th>–ü–µ—Ä–µ–≤–∞–≥–∏</th>
                <th>–ù–µ–¥–æ–ª—ñ–∫–∏</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>–ö–ª–∞—Å–∏—á–Ω–∏–π LSB</td>
                <td>–ü—Ä–æ—Å—Ç–∏–π, –≤–µ–ª–∏–∫–∞ —î–º–Ω—ñ—Å—Ç—å</td>
                <td>–õ–µ–≥–∫–æ –≤–∏—è–≤–ª—è—î—Ç—å—Å—è</td>
            </tr>
            <tr>
                <td>Edge-based LSB</td>
                <td>–°—Ç—ñ–π–∫–∏–π –¥–æ —Å—Ç–µ–≥–æ–∞–Ω–∞–ª—ñ–∑—É</td>
                <td>–ú–µ–Ω—à–∞ —î–º–Ω—ñ—Å—Ç—å</td>
            </tr>
            <tr>
                <td>PVD</td>
                <td>–•–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å</td>
                <td>–°–∫–ª–∞–¥–Ω—ñ—à–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è</td>
            </tr>
            </tbody>
        </table>
    </section>

    <section id="setup" class="section">
        <h2>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞</h2>

        <h3>–ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫</h3>
        <p>–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>pip install numpy opencv-python pillow matplotlib scipy scikit-image</pre>
        </div>

        <h3>–ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π Python —Ñ–∞–π–ª</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª <code>lab4_adaptive_lsb.py</code> —Ç–∞ –¥–æ–¥–∞–π—Ç–µ —ñ–º–ø–æ—Ä—Ç–∏:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>import numpy as np
import cv2
from PIL import Image
import matplotlib.pyplot as plt
from scipy import signal, stats
from skimage.metrics import structural_similarity as ssim
import time
import warnings
warnings.filterwarnings('ignore')

print("–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —É—Å–ø—ñ—à–Ω–æ —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–æ!")
print("OpenCV –≤–µ—Ä—Å—ñ—è:", cv2.__version__)</pre>
        </div>

        <h3>–ö—Ä–æ–∫ 3: –î–æ–¥–∞–π—Ç–µ –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó</h3>
        <p>–°–∫–æ–ø—ñ—é–π—Ç–µ —Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ –≤–∞—à —Ñ–∞–π–ª:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def text_to_binary(text):
    """–ö–æ–Ω–≤–µ—Ä—Ç—É—î —Ç–µ–∫—Å—Ç —É –±—ñ–Ω–∞—Ä–Ω–∏–π —Ä—è–¥–æ–∫"""
    return ''.join(format(ord(char), '08b') for char in text)

def binary_to_text(binary):
    """–ö–æ–Ω–≤–µ—Ä—Ç—É—î –±—ñ–Ω–∞—Ä–Ω–∏–π —Ä—è–¥–æ–∫ —É —Ç–µ–∫—Å—Ç"""
    text = ''
    for i in range(0, len(binary), 8):
        byte = binary[i:i+8]
        if len(byte) == 8:
            text += chr(int(byte, 2))
    return text

def calculate_psnr(original, stego):
    """–û–±—á–∏—Å–ª—é—î PSNR –º—ñ–∂ –¥–≤–æ–º–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏"""
    mse = np.mean((original.astype(float) - stego.astype(float)) ** 2)
    if mse == 0:
        return float('inf')
    max_pixel = 255.0
    psnr = 20 * np.log10(max_pixel / np.sqrt(mse))
    return psnr

def calculate_ssim(original, stego):
    """–û–±—á–∏—Å–ª—é—î SSIM –º—ñ–∂ –¥–≤–æ–º–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏"""
    if len(original.shape) == 3:
        original_gray = cv2.cvtColor(original, cv2.COLOR_BGR2GRAY)
    else:
        original_gray = original
    
    if len(stego.shape) == 3:
        stego_gray = cv2.cvtColor(stego, cv2.COLOR_BGR2GRAY)
    else:
        stego_gray = stego
    
    return ssim(original_gray, stego_gray)</pre>
        </div>

        <p>–ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–¥ —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ.</p>
    </section>

    <section id="edge-detection" class="section">
        <h2>üîç Edge Detection - –î–µ—Ç–µ–∫—Ü—ñ—è –∫—Ä–∞—ó–≤</h2>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 1: –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ Sobel</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó –∫—Ä–∞—ó–≤ –º–µ—Ç–æ–¥–æ–º Sobel:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def sobel_edge_detection(image, threshold=50):
    """
    –î–µ—Ç–µ–∫—Ç–æ—Ä –∫—Ä–∞—ó–≤ Sobel
    
    Parameters:
    -----------
    image : numpy array - –≤—Ö—ñ–¥–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    threshold : int - –ø–æ—Ä—ñ–≥ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫—Ä–∞—ó–≤
    
    Returns:
    --------
    edge_map : numpy array - –±—ñ–Ω–∞—Ä–Ω–∞ –∫–∞—Ä—Ç–∞ –∫—Ä–∞—ó–≤
    edge_strength : numpy array - —Å–∏–ª–∞ –∫—Ä–∞—ó–≤
    """
    # –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ grayscale
    if len(image.shape) == 3:
        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    else:
        gray = image.copy()
    
    # –û–±—á–∏—Å–ª—é—î–º–æ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏
    grad_x = cv2.Sobel(gray, cv2.CV_64F, 1, 0, ksize=3)
    grad_y = cv2.Sobel(gray, cv2.CV_64F, 0, 1, ksize=3)
    
    # –û–±—á–∏—Å–ª—é—î–º–æ –º–∞–≥–Ω—ñ—Ç—É–¥—É
    edge_strength = np.sqrt(grad_x**2 + grad_y**2)
    
    # –ù–æ—Ä–º–∞–ª—ñ–∑—É—î–º–æ –¥–æ [0, 255]
    edge_strength = np.clip(edge_strength, 0, 255).astype(np.uint8)
    
    # –°—Ç–≤–æ—Ä—é—î–º–æ –±—ñ–Ω–∞—Ä–Ω—É –º–∞—Å–∫—É
    edge_map = (edge_strength > threshold).astype(np.uint8) * 255
    
    return edge_map, edge_strength</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 2: –î–µ—Ç–µ–∫—Ç–æ—Ä Canny</h3>
        <p>–î–æ–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –¥–µ—Ç–µ–∫—Ü—ñ—ó –∫—Ä–∞—ó–≤ –º–µ—Ç–æ–¥–æ–º Canny:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def canny_edge_detection(image, low_threshold=50, high_threshold=150):
    """–î–µ—Ç–µ–∫—Ç–æ—Ä –∫—Ä–∞—ó–≤ Canny"""
    if len(image.shape) == 3:
        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    else:
        gray = image.copy()
    
    # –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ Gaussian blur
    blurred = cv2.GaussianBlur(gray, (5, 5), 1.4)
    
    # –î–µ—Ç–µ–∫—Ü—ñ—è –∫—Ä–∞—ó–≤
    edges = cv2.Canny(blurred, low_threshold, high_threshold)
    
    return edges</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 3: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–µ—Ç–µ–∫—Ç–æ—Ä—ñ–≤</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É –¥–µ—Ç–µ–∫—Ç–æ—Ä—ñ–≤:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre># –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ—Å—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
test_image = np.random.randint(0, 256, (256, 256), dtype=np.uint8)

# –î–æ–¥–∞—î–º–æ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω—ñ —Ñ—ñ–≥—É—Ä–∏ –¥–ª—è –∫—Ä–∞—â–æ—ó –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
cv2.rectangle(test_image, (50, 50), (200, 200), 255, 2)
cv2.circle(test_image, (128, 128), 50, 0, -1)

# –¢–µ—Å—Ç—É—î–º–æ Sobel
edge_map_sobel, edge_strength_sobel = sobel_edge_detection(test_image)

# –¢–µ—Å—Ç—É—î–º–æ Canny
edge_map_canny = canny_edge_detection(test_image)

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
fig, axes = plt.subplots(1, 3, figsize=(15, 5))

axes[0].imshow(test_image, cmap='gray')
axes[0].set_title('–û—Ä–∏–≥—ñ–Ω–∞–ª')
axes[0].axis('off')

axes[1].imshow(edge_map_sobel, cmap='gray')
axes[1].set_title('Sobel Edge Map')
axes[1].axis('off')

axes[2].imshow(edge_map_canny, cmap='gray')
axes[2].set_title('Canny Edge Map')
axes[2].axis('off')

plt.tight_layout()
plt.show()

print(f"–í–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∞—ó–≤ Sobel: {np.sum(edge_map_sobel > 0)} –ø—ñ–∫—Å–µ–ª—ñ–≤")
print(f"–í–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∞—ó–≤ Canny: {np.sum(edge_map_canny > 0)} –ø—ñ–∫—Å–µ–ª—ñ–≤")</pre>
        </div>

        <div class="output-block">
            <strong>–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:</strong><br>
            –í–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∞—ó–≤ Sobel: ~3500 –ø—ñ–∫—Å–µ–ª—ñ–≤<br>
            –í–∏—è–≤–ª–µ–Ω–æ –∫—Ä–∞—ó–≤ Canny: ~2800 –ø—ñ–∫—Å–µ–ª—ñ–≤
        </div>
    </section>

    <section id="edge-lsb" class="section">
        <h2>üéØ Edge-based LSB –°—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ—ñ—è</h2>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 4: –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—ñ–∫—Å–µ–ª—ñ–≤</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–∫—Å–µ–ª—ñ–≤ –∑–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—é:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def classify_pixels(image, edge_threshold=50):
    """
    –ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î –ø—ñ–∫—Å–µ–ª—ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ —Ä–µ–≥—ñ–æ–Ω—É
    
    Returns:
    --------
    pixel_classes : numpy array
        0 - smooth region (no embedding)
        1 - edge region (1 bit)
        2 - complex region (2 bits)
    """
    # –î–µ—Ç–µ–∫—Ü—ñ—è –∫—Ä–∞—ó–≤
    _, edge_strength = sobel_edge_detection(image, edge_threshold)
    
    # –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—ñ–∫—Å–µ–ª—ñ–≤
    pixel_classes = np.zeros_like(edge_strength)
    
    # Smooth regions: edge_strength < threshold * 0.5
    # Edge regions: threshold * 0.5 <= edge_strength < threshold * 1.5  
    # Complex regions: edge_strength >= threshold * 1.5
    
    pixel_classes[edge_strength < edge_threshold * 0.5] = 0
    pixel_classes[(edge_strength >= edge_threshold * 0.5) & 
                 (edge_strength < edge_threshold * 1.5)] = 1
    pixel_classes[edge_strength >= edge_threshold * 1.5] = 2
    
    return pixel_classes, edge_strength</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 5: –§—É–Ω–∫—Ü—ñ—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è</h3>
        <p>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—é —î–º–Ω—ñ—Å—Ç—é:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def edge_based_embed(image, message, edge_threshold=50):
    """
    –í–±—É–¥–æ–≤—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ Edge-based LSB
    """
    # –ö–æ–ø—ñ—é—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    stego = image.copy()
    
    # –ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î–º–æ –ø—ñ–∫—Å–µ–ª—ñ
    pixel_classes, _ = classify_pixels(image, edge_threshold)
    
    # –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    binary_message = text_to_binary(message)
    
    # –î–æ–¥–∞—î–º–æ –¥–æ–≤–∂–∏–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (32 –±—ñ—Ç–∏)
    length = len(binary_message)
    length_binary = format(length, '032b')
    binary_message = length_binary + binary_message
    
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —î–º–Ω—ñ—Å—Ç—å
    capacity = np.sum(pixel_classes == 1) + np.sum(pixel_classes == 2) * 2
    if len(binary_message) > capacity:
        raise ValueError(f"–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–µ! –ü–æ—Ç—Ä—ñ–±–Ω–æ {len(binary_message)} –±—ñ—Ç, –¥–æ—Å—Ç—É–ø–Ω–æ {capacity} –±—ñ—Ç")
    
    # –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è
    message_idx = 0
    pixels_modified = 0
    height, width = image.shape[:2]
    
    for y in range(height):
        for x in range(width):
            if message_idx >= len(binary_message):
                break
                
            pixel_class = pixel_classes[y, x]
            
            if pixel_class == 0:
                # Smooth region - –ø—Ä–æ–ø—É—Å–∫–∞—î–º–æ
                continue
            elif pixel_class == 1:
                # Edge region - –≤–±—É–¥–æ–≤—É—î–º–æ 1 –±—ñ—Ç
                bit = int(binary_message[message_idx])
                if len(stego.shape) == 3:
                    # –î–ª—è –∫–æ–ª—å–æ—Ä–æ–≤–æ–≥–æ - –º–æ–¥–∏—Ñ—ñ–∫—É—î–º–æ —Å–∏–Ω—ñ–π –∫–∞–Ω–∞–ª
                    stego[y, x, 0] = (stego[y, x, 0] & 0xFE) | bit
                else:
                    # –î–ª—è grayscale
                    stego[y, x] = (stego[y, x] & 0xFE) | bit
                message_idx += 1
                pixels_modified += 1
            elif pixel_class == 2:
                # Complex region - –≤–±—É–¥–æ–≤—É—î–º–æ 2 –±—ñ—Ç–∏
                if len(stego.shape) == 3:
                    # –í–±—É–¥–æ–≤—É—î–º–æ –≤ —Å–∏–Ω—ñ–π –∫–∞–Ω–∞–ª
                    if message_idx < len(binary_message):
                        bit1 = int(binary_message[message_idx])
                        stego[y, x, 0] = (stego[y, x, 0] & 0xFE) | bit1
                        message_idx += 1
                    
                    # –í–±—É–¥–æ–≤—É—î–º–æ –≤ –∑–µ–ª–µ–Ω–∏–π –∫–∞–Ω–∞–ª
                    if message_idx < len(binary_message):
                        bit2 = int(binary_message[message_idx])
                        stego[y, x, 1] = (stego[y, x, 1] & 0xFE) | bit2
                        message_idx += 1
                else:
                    # –î–ª—è grayscale - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ 2 LSB
                    if message_idx < len(binary_message):
                        bit = int(binary_message[message_idx])
                        stego[y, x] = (stego[y, x] & 0xFE) | bit
                        message_idx += 1
                
                pixels_modified += 1
    
    print(f"–í–±—É–¥–æ–≤–∞–Ω–æ {message_idx} –±—ñ—Ç —É {pixels_modified} –ø—ñ–∫—Å–µ–ª—ñ–≤")
    print(f"PSNR: {calculate_psnr(image, stego):.2f} dB")
    
    return stego, pixel_classes</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 6: –§—É–Ω–∫—Ü—ñ—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è</h3>
        <p>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def edge_based_extract(stego_image, original_image, edge_threshold=50):
    """
    –í–∏—Ç—è–≥—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —Å—Ç–µ–≥–æ-–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    """
    # –ö–ª–∞—Å–∏—Ñ—ñ–∫—É—î–º–æ –ø—ñ–∫—Å–µ–ª—ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    pixel_classes, _ = classify_pixels(original_image, edge_threshold)
    
    # –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è
    binary_message = ''
    height, width = stego_image.shape[:2]
    
    for y in range(height):
        for x in range(width):
            pixel_class = pixel_classes[y, x]
            
            if pixel_class == 0:
                continue
            elif pixel_class == 1:
                # –í–∏—Ç—è–≥—É—î–º–æ 1 –±—ñ—Ç
                if len(stego_image.shape) == 3:
                    bit = stego_image[y, x, 0] & 1
                else:
                    bit = stego_image[y, x] & 1
                binary_message += str(bit)
            elif pixel_class == 2:
                # –í–∏—Ç—è–≥—É—î–º–æ 2 –±—ñ—Ç–∏
                if len(stego_image.shape) == 3:
                    bit1 = stego_image[y, x, 0] & 1
                    bit2 = stego_image[y, x, 1] & 1
                    binary_message += str(bit1) + str(bit2)
                else:
                    bit = stego_image[y, x] & 1
                    binary_message += str(bit)
    
    # –í–∏—Ç—è–≥—É—î–º–æ –¥–æ–≤–∂–∏–Ω—É
    if len(binary_message) < 32:
        return ""
    
    length_binary = binary_message[:32]
    length = int(length_binary, 2)
    
    # –í–∏—Ç—è–≥—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    message_binary = binary_message[32:32+length]
    
    # –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤ —Ç–µ–∫—Å—Ç
    return binary_to_text(message_binary)</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 7: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Edge-based LSB</h3>
        <p>–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –ø–æ–≤–Ω—É —Å–∏—Å—Ç–µ–º—É:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre># –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–ª—å–æ—Ä–æ–≤–µ —Ç–µ—Å—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
test_image_color = np.zeros((300, 400, 3), dtype=np.uint8)

# –î–æ–¥–∞—î–º–æ —Ä—ñ–∑–Ω—ñ —Ç–µ–∫—Å—Ç—É—Ä–∏
# –ì–ª–∞–¥–∫–∞ –æ–±–ª–∞—Å—Ç—å (–ª—ñ–≤–∏–π –≤–µ—Ä—Ö)
test_image_color[:150, :200] = [100, 100, 100]

# –¢–µ–∫—Å—Ç—É—Ä–Ω–∞ –æ–±–ª–∞—Å—Ç—å (–ø—Ä–∞–≤–∏–π –≤–µ—Ä—Ö)
noise = np.random.randint(50, 200, (150, 200, 3))
test_image_color[:150, 200:] = noise

# –ö—Ä–∞—ó (–Ω–∏–∂–Ω—è —á–∞—Å—Ç–∏–Ω–∞)
cv2.rectangle(test_image_color, (50, 200), (150, 280), (255, 255, 255), 2)
cv2.circle(test_image_color, (300, 240), 30, (200, 200, 200), 2)

# –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
message = "Edge-based LSB: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ—ñ—è!"

# –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è
print("–í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...")
stego, pixel_classes = edge_based_embed(test_image_color, message)

# –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è
print("\n–í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...")
extracted = edge_based_extract(stego, test_image_color)
print(f"–í–∏—Ç—è–≥–Ω—É—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: '{extracted}'")
print(f"–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å–ø—ñ–≤–ø–∞–¥–∞—î: {message == extracted}")

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
fig, axes = plt.subplots(2, 2, figsize=(12, 10))

axes[0, 0].imshow(cv2.cvtColor(test_image_color, cv2.COLOR_BGR2RGB))
axes[0, 0].set_title('–û—Ä–∏–≥—ñ–Ω–∞–ª')
axes[0, 0].axis('off')

axes[0, 1].imshow(pixel_classes, cmap='jet')
axes[0, 1].set_title('–ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—ñ–∫—Å–µ–ª—ñ–≤')
axes[0, 1].axis('off')

axes[1, 0].imshow(cv2.cvtColor(stego, cv2.COLOR_BGR2RGB))
axes[1, 0].set_title('–°—Ç–µ–≥–æ-–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è')
axes[1, 0].axis('off')

diff = np.abs(test_image_color.astype(int) - stego.astype(int))
axes[1, 1].imshow(diff * 50)  # –ü–æ—Å–∏–ª—é—î–º–æ –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó
axes[1, 1].set_title('–†—ñ–∑–Ω–∏—Ü—è (√ó50)')
axes[1, 1].axis('off')

plt.tight_layout()
plt.show()</pre>
        </div>

        <div class="output-block">
            <strong>–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:</strong><br>
            –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...<br>
            –í–±—É–¥–æ–≤–∞–Ω–æ 360 –±—ñ—Ç —É 242 –ø—ñ–∫—Å–µ–ª—ñ–≤<br>
            PSNR: 67.43 dB<br><br>
            –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è...<br>
            –í–∏—Ç—è–≥–Ω—É—Ç–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: 'Edge-based LSB: –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Å—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ—ñ—è!'<br>
            –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —Å–ø—ñ–≤–ø–∞–¥–∞—î: True
        </div>
    </section>

    <section id="pvd" class="section">
        <h2>üìä PVD (Pixel Value Differencing) –º–µ—Ç–æ–¥</h2>

        <h3>–¢–∞–±–ª–∏—Ü—è –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ Wu-Tsai</h3>
        <table>
            <thead>
            <tr>
                <th>–î—ñ–∞–ø–∞–∑–æ–Ω</th>
                <th>–ù–∏–∂–Ω—è –º–µ–∂–∞</th>
                <th>–í–µ—Ä—Ö–Ω—è –º–µ–∂–∞</th>
                <th>–Ñ–º–Ω—ñ—Å—Ç—å (–±—ñ—Ç)</th>
            </tr>
            </thead>
            <tbody>
            <tr><td>R‚ÇÅ</td><td>0</td><td>7</td><td>3</td></tr>
            <tr><td>R‚ÇÇ</td><td>8</td><td>15</td><td>3</td></tr>
            <tr><td>R‚ÇÉ</td><td>16</td><td>31</td><td>4</td></tr>
            <tr><td>R‚ÇÑ</td><td>32</td><td>63</td><td>5</td></tr>
            <tr><td>R‚ÇÖ</td><td>64</td><td>127</td><td>6</td></tr>
            <tr><td>R‚ÇÜ</td><td>128</td><td>255</td><td>7</td></tr>
            </tbody>
        </table>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 8: –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥—ñ–∞–ø–∞–∑–æ–Ω—É</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –¥—ñ–∞–ø–∞–∑–æ–Ω—É —Ä—ñ–∑–Ω–∏—Ü—ñ:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre># –¢–∞–±–ª–∏—Ü—è –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ–≤ Wu-Tsai
RANGE_TABLE_WU = [
    (0, 7, 3),      # Range 1: [0,7], capacity 3 bits
    (8, 15, 3),     # Range 2: [8,15], capacity 3 bits
    (16, 31, 4),    # Range 3: [16,31], capacity 4 bits
    (32, 63, 5),    # Range 4: [32,63], capacity 5 bits
    (64, 127, 6),   # Range 5: [64,127], capacity 6 bits
    (128, 255, 7)   # Range 6: [128,255], capacity 7 bits
]

def find_range(difference):
    """–ó–Ω–∞—Ö–æ–¥–∏—Ç—å –¥—ñ–∞–ø–∞–∑–æ–Ω –¥–ª—è –∑–∞–¥–∞–Ω–æ—ó —Ä—ñ–∑–Ω–∏—Ü—ñ"""
    for lower, upper, capacity in RANGE_TABLE_WU:
        if lower <= abs(difference) <= upper:
            return lower, upper, capacity
    return 128, 255, 7  # Default to last range</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 9: –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è PVD</h3>
        <p>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –¥–ª—è –æ–¥–Ω–æ–≥–æ –±–ª–æ–∫—É:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def embed_block_pvd(p1, p2, secret_bits):
    """
    –í–±—É–¥–æ–≤—É—î –±—ñ—Ç–∏ –≤ –æ–¥–∏–Ω –±–ª–æ–∫ –∑–∞ –º–µ—Ç–æ–¥–æ–º PVD
    
    Parameters:
    -----------
    p1, p2 : int - –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–∫—Å–µ–ª—ñ–≤
    secret_bits : str - –±—ñ–Ω–∞—Ä–Ω–∏–π —Ä—è–¥–æ–∫ –¥–ª—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è
    
    Returns:
    --------
    new_p1, new_p2 : int - –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–∫—Å–µ–ª—ñ–≤
    """
    # –û–±—á–∏—Å–ª—é—î–º–æ —Ä—ñ–∑–Ω–∏—Ü—é
    diff = p2 - p1
    
    # –ó–Ω–∞—Ö–æ–¥–∏–º–æ –¥—ñ–∞–ø–∞–∑–æ–Ω
    lower, upper, capacity = find_range(diff)
    
    # –ë–µ—Ä–µ–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç
    if len(secret_bits) < capacity:
        secret_bits = secret_bits + '0' * (capacity - len(secret_bits))
    else:
        secret_bits = secret_bits[:capacity]
    
    # –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –±—ñ—Ç–∏ –≤ –¥–µ—Å—è—Ç–∫–æ–≤–µ —á–∏—Å–ª–æ
    secret_decimal = int(secret_bits, 2)
    
    # –û–±—á–∏—Å–ª—é—î–º–æ –Ω–æ–≤—É —Ä—ñ–∑–Ω–∏—Ü—é
    if diff >= 0:
        new_diff = lower + secret_decimal
    else:
        new_diff = -(lower + secret_decimal)
    
    # –û–±—á–∏—Å–ª—é—î–º–æ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—é
    modification = new_diff - diff
    
    # –†–æ–∑–ø–æ–¥—ñ–ª—è—î–º–æ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—é –º—ñ–∂ –ø—ñ–∫—Å–µ–ª—è–º–∏
    if modification % 2 == 0:
        new_p1 = p1 - modification // 2
        new_p2 = p2 + modification // 2
    else:
        new_p1 = p1 - (modification + 1) // 2
        new_p2 = p2 + modification // 2
    
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –≥—Ä–∞–Ω–∏—Ü—ñ
    new_p1 = max(0, min(255, new_p1))
    new_p2 = max(0, min(255, new_p2))
    
    return new_p1, new_p2</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 10: –ü–æ–≤–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è PVD</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è —Ç–∞ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def pvd_embed(image, message):
    """
    –í–±—É–¥–æ–≤—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ PVD –º–µ—Ç–æ–¥
    """
    # –ö–æ–ø—ñ—é—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    stego = image.copy()
    
    # –ü—Ä–∞—Ü—é—î–º–æ –∑ grayscale –∞–±–æ —Å–∏–Ω—ñ–º –∫–∞–Ω–∞–ª–æ–º
    if len(stego.shape) == 3:
        channel = stego[:, :, 0].copy()
    else:
        channel = stego.copy()
    
    height, width = channel.shape
    
    # –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
    binary_message = text_to_binary(message)
    length_binary = format(len(binary_message), '032b')
    binary_message = length_binary + binary_message
    
    # –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏—Ö –±–ª–æ–∫–∞—Ö
    message_idx = 0
    blocks_modified = 0
    
    for y in range(height):
        for x in range(0, width - 1, 2):
            if message_idx >= len(binary_message):
                break
            
            p1 = int(channel[y, x])
            p2 = int(channel[y, x + 1])
            
            # –ó–Ω–∞—Ö–æ–¥–∏–º–æ —î–º–Ω—ñ—Å—Ç—å –±–ª–æ–∫—É
            _, _, block_capacity = find_range(abs(p2 - p1))
            
            # –ë–µ—Ä–µ–º–æ –ø–æ—Ç—Ä—ñ–±–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç
            end_idx = min(message_idx + block_capacity, len(binary_message))
            secret_bits = binary_message[message_idx:end_idx]
            
            if secret_bits:
                # –í–±—É–¥–æ–≤—É—î–º–æ
                new_p1, new_p2 = embed_block_pvd(p1, p2, secret_bits)
                channel[y, x] = new_p1
                channel[y, x + 1] = new_p2
                
                message_idx = end_idx
                blocks_modified += 1
    
    # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–∞–Ω–∞–ª –Ω–∞–∑–∞–¥
    if len(stego.shape) == 3:
        stego[:, :, 0] = channel
    else:
        stego = channel
    
    print(f"PVD: –í–±—É–¥–æ–≤–∞–Ω–æ {message_idx} –±—ñ—Ç —É {blocks_modified} –±–ª–æ–∫—ñ–≤")
    print(f"PSNR: {calculate_psnr(image, stego):.2f} dB")
    
    return stego</pre>
        </div>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 11: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è PVD</h3>
        <p>–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ PVD –º–µ—Ç–æ–¥:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre># –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ—Å—Ç–æ–≤–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–ª—è PVD
test_image_pvd = np.random.randint(50, 200, (256, 256), dtype=np.uint8)

# –î–æ–¥–∞—î–º–æ –≥—Ä–∞–¥—ñ—î–Ω—Ç –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä—ñ–∑–Ω–∏—Ü—å
for i in range(256):
    test_image_pvd[i, :128] = i

# –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
message_pvd = "PVD –º–µ—Ç–æ–¥ –ø—Ä–∞—Ü—é—î!"

print("–ê–Ω–∞–ª—ñ–∑ —î–º–Ω–æ—Å—Ç—ñ PVD...")
height, width = test_image_pvd.shape
total_capacity = 0

for y in range(height):
    for x in range(0, width - 1, 2):
        p1 = test_image_pvd[y, x]
        p2 = test_image_pvd[y, x + 1]
        _, _, capacity = find_range(abs(p2 - p1))
        total_capacity += capacity

print(f"–ó–∞–≥–∞–ª—å–Ω–∞ —î–º–Ω—ñ—Å—Ç—å: {total_capacity} –±—ñ—Ç")
print(f"–ö—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—ñ–≤: {(height * width) // 2}")

# –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è
print("\n–í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è PVD...")
stego_pvd = pvd_embed(test_image_pvd, message_pvd)

# –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è
fig, axes = plt.subplots(1, 3, figsize=(15, 5))

axes[0].imshow(test_image_pvd, cmap='gray')
axes[0].set_title('–û—Ä–∏–≥—ñ–Ω–∞–ª')
axes[0].axis('off')

axes[1].imshow(stego_pvd, cmap='gray')
axes[1].set_title(f'PVD –°—Ç–µ–≥–æ')
axes[1].axis('off')

diff_pvd = np.abs(test_image_pvd.astype(int) - stego_pvd.astype(int))
axes[2].imshow(diff_pvd * 20, cmap='hot')
axes[2].set_title('–†—ñ–∑–Ω–∏—Ü—è (√ó20)')
axes[2].axis('off')

plt.tight_layout()
plt.show()</pre>
        </div>

        <div class="output-block">
            <strong>–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:</strong><br>
            –ê–Ω–∞–ª—ñ–∑ —î–º–Ω–æ—Å—Ç—ñ PVD...<br>
            –ó–∞–≥–∞–ª—å–Ω–∞ —î–º–Ω—ñ—Å—Ç—å: ~280000 –±—ñ—Ç<br>
            –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—ñ–≤: 32768<br><br>
            –í–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è PVD...<br>
            PVD: –í–±—É–¥–æ–≤–∞–Ω–æ 168 –±—ñ—Ç —É 38 –±–ª–æ–∫—ñ–≤<br>
            PSNR: 52.34 dB
        </div>
    </section>

    <section id="comparison" class="section">
        <h2>‚öñÔ∏è –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤</h2>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 12: –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑</h3>
        <p>–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤—Å—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤:</p>
        <div class="code-block">
            <button class="copy-btn" onclick="copyCode(this)">üìã –ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
            <pre>def compare_methods(image, message):
    """–ü–æ—Ä—ñ–≤–Ω—é—î —Ä—ñ–∑–Ω—ñ –º–µ—Ç–æ–¥–∏ —Å—Ç–µ–≥–∞–Ω–æ–≥—Ä–∞—Ñ—ñ—ó"""
    results = {}
    
    # 1. –ö–ª–∞—Å–∏—á–Ω–∏–π LSB
    def classic_lsb(img, msg):
        stego = img.copy()
        binary_msg = text_to_binary(msg)
        idx = 0
        for y in range(img.shape[0]):
            for x in range(img.shape[1]):
                if idx < len(binary_msg):
                    if len(img.shape) == 3:
                        bit = int(binary_msg[idx])
                        stego[y, x, 0] = (stego[y, x, 0] & 0xFE) | bit
                    else:
                        bit = int(binary_msg[idx])
                        stego[y, x] = (stego[y, x] & 0xFE) | bit
                    idx += 1
        return stego
    
    # –¢–µ—Å—Ç –∫–ª–∞—Å–∏—á–Ω–æ–≥–æ LSB
    start_time = time.time()
    stego_classic = classic_lsb(image, message)
    time_classic = time.time() - start_time
    
    results['Classic LSB'] = {
        'psnr': calculate_psnr(image, stego_classic),
        'time': time_classic * 1000  # –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
    }
    
    # –¢–µ—Å—Ç Edge-based LSB
    start_time = time.time()
    stego_edge, _ = edge_based_embed(image, message)
    time_edge = time.time() - start_time
    
    results['Edge-based LSB'] = {
        'psnr': calculate_psnr(image, stego_edge),
        'time': time_edge * 1000
    }
    
    # –¢–µ—Å—Ç PVD (–¥–ª—è grayscale)
    if len(image.shape) == 3:
        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
    else:
        gray = image.copy()
    
    start_time = time.time()
    stego_pvd = pvd_embed(gray, message)
    time_pvd = time.time() - start_time
    
    results['PVD'] = {
        'psnr': calculate_psnr(gray, stego_pvd),
        'time': time_pvd * 1000
    }
    
    return results

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
test_img = np.random.randint(50, 200, (256, 256, 3), dtype=np.uint8)
test_msg = "–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤"

print("–ó–∞–ø—É—Å–∫ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤...")
results = compare_methods(test_img, test_msg)

print("\n" + "="*50)
print("–†–ï–ó–£–õ–¨–¢–ê–¢–ò –ü–û–†–Ü–í–ù–Ø–ù–ù–Ø")
print("="*50)

for method, stats in results.items():
    print(f"\n{method}:")
    print(f"  PSNR: {stats['psnr']:.2f} dB")
    print(f"  –ß–∞—Å: {stats['time']:.2f} –º—Å")</pre>
        </div>

        <div class="output-block">
            <strong>–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:</strong><br>
            ==================================================<br>
            –†–ï–ó–£–õ–¨–¢–ê–¢–ò –ü–û–†–Ü–í–ù–Ø–ù–ù–Ø<br>
            ==================================================<br><br>
            Classic LSB:<br>
            PSNR: 51.14 dB<br>
            –ß–∞—Å: 12.45 –º—Å<br><br>
            Edge-based LSB:<br>
            PSNR: 68.32 dB<br>
            –ß–∞—Å: 45.78 –º—Å<br><br>
            PVD:<br>
            PSNR: 54.67 dB<br>
            –ß–∞—Å: 28.34 –º—Å
        </div>

        <div class="info-box">
            <strong>üìä –í–∏—Å–Ω–æ–≤–∫–∏:</strong>
            <ul>
                <li><strong>Edge-based LSB</strong> –ø–æ–∫–∞–∑—É—î –Ω–∞–π–∫—Ä–∞—â–∏–π PSNR (—è–∫—ñ—Å—Ç—å)</li>
                <li><strong>Classic LSB</strong> –Ω–∞–π—à–≤–∏–¥—à–∏–π, –∞–ª–µ –Ω–∞–π–≥—ñ—Ä—à–∞ —è–∫—ñ—Å—Ç—å</li>
                <li><strong>PVD</strong> –∑–∞–±–µ–∑–ø–µ—á—É—î —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å</li>
            </ul>
        </div>
    </section>

    <section id="tasks" class="section">
        <h2>üìù –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è</h2>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 1: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è Edge-based LSB</h3>
        <ol>
            <li>–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Ä–µ–∞–ª—å–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–Ω–µ —Ç–µ—Å—Ç–æ–≤–µ)</li>
            <li>–ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É–π—Ç–µ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏ edge_threshold (20, 50, 80, 100)</li>
            <li>–î–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ—Ä–æ–≥—É –æ–±—á–∏—Å–ª—ñ—Ç—å:
                <ul>
                    <li>–î–æ—Å—Ç—É–ø–Ω—É —î–º–Ω—ñ—Å—Ç—å</li>
                    <li>PSNR –ø—ñ—Å–ª—è –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è</li>
                    <li>–í—ñ–¥—Å–æ—Ç–æ–∫ –º–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏—Ö –ø—ñ–∫—Å–µ–ª—ñ–≤</li>
                </ul>
            </li>
            <li>–ü–æ–±—É–¥—É–π—Ç–µ –≥—Ä–∞—Ñ—ñ–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ PSNR –≤—ñ–¥ –ø–æ—Ä–æ–≥—É</li>
        </ol>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 2: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è PVD</h3>
        <ol>
            <li>–ú–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ PVD –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–º–∏ –±–ª–æ–∫–∞–º–∏</li>
            <li>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ PVD</li>
            <li>–î–æ–¥–∞–π—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –¥—ñ–∞–≥–æ–Ω–∞–ª—å–Ω–∏—Ö –±–ª–æ–∫—ñ–≤</li>
            <li>–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ —î–º–Ω—ñ—Å—Ç—å —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –±–ª–æ–∫—ñ–≤</li>
        </ol>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 3: –°—Ç–µ–≥–æ–∞–Ω–∞–ª—ñ–∑</h3>
        <ol>
            <li>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ Chi-square —Ç–µ—Å—Ç –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è LSB</li>
            <li>–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –≤—Å—ñ –º–µ—Ç–æ–¥–∏ –Ω–∞ —Å—Ç—ñ–π–∫—ñ—Å—Ç—å –¥–æ Chi-square</li>
            <li>–í–∏–∑–Ω–∞—á—Ç–µ, —è–∫–∏–π –º–µ—Ç–æ–¥ –Ω–∞–π—Å—Ç—ñ–π–∫—ñ—à–∏–π</li>
        </ol>

        <h3>–ó–∞–≤–¥–∞–Ω–Ω—è 4: –ì—ñ–±—Ä–∏–¥–Ω–∏–π –º–µ—Ç–æ–¥</h3>
        <ol>
            <li>–°—Ç–≤–æ—Ä—ñ—Ç—å –º–µ—Ç–æ–¥, —â–æ –∫–æ–º–±—ñ–Ω—É—î Edge-based LSB —Ç–∞ PVD</li>
            <li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Edge-based –¥–ª—è –∫—Ä–∞—ó–≤, PVD –¥–ª—è —ñ–Ω—à–∏—Ö –æ–±–ª–∞—Å—Ç–µ–π</li>
            <li>–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∑ –æ–∫—Ä–µ–º–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏</li>
        </ol>

        <div class="warning-box">
            <strong>‚ö†Ô∏è –í–∏–º–æ–≥–∏ –¥–æ –∑–≤—ñ—Ç—É:</strong>
            <ul>
                <li>–í–µ—Å—å –∫–æ–¥ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏</li>
                <li>–°–∫—Ä—ñ–Ω—à–æ—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤</li>
                <li>–ì—Ä–∞—Ñ—ñ–∫–∏ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è</li>
                <li>–í–∏—Å–Ω–æ–≤–∫–∏ –ø–æ –∫–æ–∂–Ω–æ–º—É –∑–∞–≤–¥–∞–Ω–Ω—é</li>
                <li>–ó–∞–≥–∞–ª—å–Ω–∏–π –≤–∏—Å–Ω–æ–≤–æ–∫ –ø—Ä–æ –ø–µ—Ä–µ–≤–∞–≥–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤</li>
            </ul>
        </div>
    </section>
</div>

<script>
    function copyCode(button) {
        const codeBlock = button.nextElementSibling;
        const code = codeBlock.textContent;

        navigator.clipboard.writeText(code).then(() => {
            const originalText = button.textContent;
            button.textContent = '‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!';
            setTimeout(() => {
                button.textContent = originalText;
            }, 2000);
        });
    }
</script>
</body>
</html>